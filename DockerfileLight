FROM python:3.10-alpine3.15

ENV ROBOT_REPORTS_DIR /opt/robotframework/reports
ENV ROBOT_TESTS_DIR /opt/robotframework/tests
ENV ROBOT_WORK_DIR /opt/robotframework/temp

ENV SCREEN_COLOUR_DEPTH 24
ENV SCREEN_HEIGHT 1080
ENV SCREEN_WIDTH 1920

#RUN apk add gcc g++ samba-client

RUN apk add samba-client

# RUN apk add python3 py3-pip samba-client

RUN pip3 install robotframework

COPY bin/run-tests-in-virtual-screen.sh /opt/robotframework/bin/
RUN chmod -R +x /opt/robotframework/bin/

ENV PATH=/opt/robotframework/bin:/opt/robotframework/drivers:$PATH

VOLUME ${ROBOT_REPORTS_DIR}

WORKDIR ${ROBOT_WORK_DIR}

# ENTRYPOINT [ "tail", "-f", "/dev/null" ]
CMD ["run-tests-in-virtual-screen.sh"]